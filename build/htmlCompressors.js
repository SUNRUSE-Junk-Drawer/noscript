import * as htmlMinifier from "html-minifier"

export default {
  htmlMinifier(html, onSuccess, onError) {
    try {
      onSuccess(htmlMinifier.minify(html, {
        caseSensitive: false,
        collapseBooleanAttributes: true,
        collapseInlineTagWhitespace: true,
        collapseWhitespace: true,
        conservativeCollapse: false,
        decodeEntities: true,
        html5: false,
        includeAutoGeneratedTags: false,
        keepClosingSlash: false,
        minifyCSS: false,
        minifyJS: false,
        minifyURLs: false,
        preserveLineBreaks: false,
        preventAttributesEscaping: false,
        processConditionalComments: false,
        removeAttributeQuotes: true,
        removeComments: true,
        removeEmptyAttributes: true,
        removeEmptyElements: true,
        removeOptionalTags: true,
        removeRedundantAttributes: true,
        removeScriptTypeAttributes: true,
        removeStyleLinkTypeAttributes: true,
        removeTagWhitespace: true,
        sortAttributes: true,
        sortClassName: true,
        trimCustomFragments: true,
        useShortDoctype: true
      }))
    } catch (e) {
      onError(e)
    }
  }
}
